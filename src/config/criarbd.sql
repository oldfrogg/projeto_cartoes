CREATE SCHEMA IF NOT EXISTS PROJETO_CARTOES;

USE PROJETO_CARTOES;

CREATE TABLE CLIENTES (
ID INT AUTO_INCREMENT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
CPF VARCHAR(11) UNIQUE NOT NULL,
EMAIL VARCHAR(255) NOT NULL,
NASCIMENTO DATE NOT NULL,
LIMITE DECIMAL(8,2) DEFAULT 0 CHECK (LIMITE >= 0.00 AND LIMITE <= 1000000.00)
);

CREATE TABLE CARTOES (
ID INT AUTO_INCREMENT PRIMARY KEY,
NOME VARCHAR(64) NOT NULL,
TIPO ENUM('credito', 'debito', 'multiplo', 'pre_pago') NOT NULL,
ANUIDADE DECIMAL(5,2) NOT NULL,
BANDEIRA ENUM('visa', 'mastercard', 'elo') NOT NULL,
SEGMENTO ENUM('varejo_pf', 'estilo', 'private', 'mei', 'empresarial', 'corporate') NOT NULL,
STATUS BOOL DEFAULT 1
);


CREATE TABLE CONTRATACOES (
ID INT AUTO_INCREMENT PRIMARY KEY,
CLIENTE_ID INT NOT NULL,
CARTAO_ID INT NOT NULL,
DATA_CONTRATACAO DATE NOT NULL,
STATUS BOOL NOT NULL,
DATA_CANCELAMENTO DATE,

FOREIGN KEY (CLIENTE_ID) REFERENCES CLIENTES(ID) ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY (CARTAO_ID) REFERENCES CARTOES(ID) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO CLIENTES (NOME, CPF, EMAIL, NASCIMENTO, LIMITE) VALUES
('Jhonatta', '12345678901', 'jhonatta@hotmail.com', '1997-04-12', 5000.00)